<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>생성형 AI 사용 기록 시스템</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // 아이콘 컴포넌트 래퍼 (Lucide SVG 활용)
        const Icon = ({ name, size = 24, className = "" }) => {
            useEffect(() => {
                lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [view, setView] = useState('home');
            const [password, setPassword] = useState('');
            const [logs, setLogs] = useState([]);
            const [statusMessage, setStatusMessage] = useState(null);
            
            const [formData, setFormData] = useState({
                name: '', studentId: '', assignment: '',
                aiUsed: '사용안함', tool: '', purpose: '', applied: '',
                agree: false
            });

            useEffect(() => {
                const savedLogs = JSON.parse(localStorage.getItem('aiLogs')) || [];
                setLogs(savedLogs);
            }, []);

            useEffect(() => {
                if (statusMessage) {
                    const timer = setTimeout(() => setStatusMessage(null), 4000);
                    return () => clearTimeout(timer);
                }
            }, [statusMessage]);

            const handleInputChange = (e) => {
                const { id, value, type, checked } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [id]: type === 'checkbox' ? checked : value
                }));
            };

            const saveLog = () => {
                if (!formData.agree) {
                    setStatusMessage({ type: 'error', text: '학업 윤리 방침에 동의해야 제출이 가능합니다.' });
                    return;
                }
                if (!formData.name || !formData.studentId || !formData.assignment) {
                    setStatusMessage({ type: 'error', text: '이름, 학번, 과제명은 필수 입력 항목입니다.' });
                    return;
                }
                if (formData.aiUsed === '사용함' && (!formData.tool || !formData.purpose || !formData.applied)) {
                    setStatusMessage({ type: 'error', text: 'AI를 사용한 경우 도구 명칭, 목적, 반영 내용을 모두 작성해야 합니다.' });
                    return;
                }

                const newLogs = [...logs, { ...formData, id: Date.now(), date: new Date().toLocaleString() }];
                setLogs(newLogs);
                localStorage.setItem('aiLogs', JSON.stringify(newLogs));
                
                setStatusMessage({ type: 'success', text: 'AI 사용 기록이 성공적으로 제출되었습니다.' });
                
                setTimeout(() => {
                    setFormData({
                        name: '', studentId: '', assignment: '',
                        aiUsed: '사용안함', tool: '', purpose: '', applied: '',
                        agree: false
                    });
                    setView('home');
                }, 2000);
            };

            const handleAdminLogin = () => {
                if (password === '1234') {
                    setView('admin');
                    setPassword('');
                } else {
                    setStatusMessage({ type: 'error', text: '비밀번호가 일치하지 않습니다.' });
                }
            };

            const deleteLog = (id) => {
                const filtered = logs.filter(log => log.id !== id);
                setLogs(filtered);
                localStorage.setItem('aiLogs', JSON.stringify(filtered));
            };

            return (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    <header className="bg-slate-900 text-white py-6 px-4 shadow-lg sticky top-0 z-10">
                        <div className="max-w-4xl mx-auto flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="bg-indigo-500 p-2 rounded-lg shadow-inner flex items-center justify-center">
                                    <Icon name="layout-dashboard" size={24} />
                                </div>
                                <h1 className="text-xl font-bold tracking-tight">AI Usage Tracking System</h1>
                            </div>
                            {view !== 'home' && (
                                <button 
                                    onClick={() => setView('home')}
                                    className="flex items-center gap-2 text-sm bg-white/10 hover:bg-white/20 px-4 py-2 rounded-xl transition-all border border-white/5"
                                >
                                    <Icon name="arrow-left" size={16} /> 메인으로
                                </button>
                            )}
                        </div>
                    </header>

                    <main className="max-w-4xl mx-auto p-6">
                        {/* Status Message */}
                        {statusMessage && (
                            <div className={`fixed top-24 right-6 left-6 md:left-auto md:w-96 z-50 p-4 rounded-2xl shadow-2xl flex items-center gap-3 border animate-fade-in ${
                                statusMessage.type === 'success' ? 'bg-emerald-50 border-emerald-200 text-emerald-800' : 'bg-rose-50 border-rose-200 text-rose-800'
                            }`}>
                                <Icon name={statusMessage.type === 'success' ? "check-circle-2" : "alert-triangle"} size={24} className="shrink-0" />
                                <span className="font-medium text-sm leading-tight">{statusMessage.text}</span>
                            </div>
                        )}

                        {/* Home View */}
                        {view === 'home' && (
                            <div className="mt-12 animate-fade-in">
                                <div className="text-center mb-12">
                                    <h2 className="text-4xl font-extrabold text-slate-900 mb-4 tracking-tight">학습 윤리와 함께하는 AI 활용</h2>
                                    <p className="text-slate-500 text-lg">생성형 AI 사용 기록을 투명하게 관리하여 정직한 학업 문화를 만듭니다.</p>
                                </div>
                                <div className="grid md:grid-cols-2 gap-8">
                                    <button onClick={() => setView('student')} className="group bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 hover:border-indigo-500 hover:shadow-2xl hover:shadow-indigo-500/10 transition-all text-left relative overflow-hidden">
                                        <div className="absolute top-0 right-0 p-8 text-indigo-100 group-hover:text-indigo-200 transition-colors">
                                            <Icon name="user" size={120} />
                                        </div>
                                        <div className="relative z-10">
                                            <div className="bg-indigo-100 text-indigo-600 p-4 rounded-2xl w-fit mb-6 group-hover:scale-110 transition-transform">
                                                <Icon name="user" size={40} />
                                            </div>
                                            <h2 className="text-2xl font-bold mb-3">학생 모드</h2>
                                            <p className="text-slate-500 leading-relaxed mb-8 pr-10">가이드라인을 확인하고 과제 수행 중 사용한 AI 도구의 기록을 제출합니다.</p>
                                            <div className="flex items-center text-indigo-600 font-bold gap-2 group-hover:translate-x-2 transition-transform">
                                                사용 기록 작성하기 <Icon name="arrow-right" size={18} />
                                            </div>
                                        </div>
                                    </button>
                                    <button onClick={() => setView('professor')} className="group bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 hover:border-slate-800 hover:shadow-2xl hover:shadow-slate-800/10 transition-all text-left relative overflow-hidden">
                                        <div className="absolute top-0 right-0 p-8 text-slate-100 group-hover:text-slate-200 transition-colors">
                                            <Icon name="shield-check" size={120} />
                                        </div>
                                        <div className="relative z-10">
                                            <div className="bg-slate-100 text-slate-800 p-4 rounded-2xl w-fit mb-6 group-hover:scale-110 transition-transform">
                                                <Icon name="shield-check" size={40} />
                                            </div>
                                            <h2 className="text-2xl font-bold mb-3">교수 모드</h2>
                                            <p className="text-slate-500 leading-relaxed mb-8 pr-10">제출된 사용 기록을 조회하고 학업 윤리 준수 여부를 검토합니다.</p>
                                            <div className="flex items-center text-slate-800 font-bold gap-2 group-hover:translate-x-2 transition-transform">
                                                관리자 대시보드 <Icon name="arrow-right" size={18} />
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Student View */}
                        {view === 'student' && (
                            <div className="max-w-2xl mx-auto animate-fade-in">
                                <div className="bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden mb-8">
                                    <div className="bg-indigo-600 p-6 flex items-center gap-3 text-white">
                                        <Icon name="file-text" size={24} />
                                        <h2 className="text-xl font-bold">생성형 AI 도구 활용 방침</h2>
                                    </div>
                                    <div className="p-8 space-y-4">
                                        <div className="bg-indigo-50 p-4 rounded-xl flex gap-3 items-start border border-indigo-100">
                                            <Icon name="info" className="text-indigo-600 shrink-0 mt-1" size={20} />
                                            <p className="text-sm text-indigo-900 leading-relaxed">
                                                본 강의에서는 아이디어 탐색, 주제 정리, 자료 분석 등의 목적으로 AI를 사용할 수 있으나, 활용 시 반드시 명시해야 합니다.
                                            </p>
                                        </div>
                                        <div className="text-slate-600 text-sm space-y-3">
                                            <p>필수 포함 사항: 도구 명칭, 사용 목적/과정, 실제 반영 부분</p>
                                            <p className="p-4 bg-rose-50 border-l-4 border-rose-500 text-rose-800 font-semibold rounded-r-lg">
                                                ⚠️ AI 생성 내용을 그대로 제출하는 행위는 학업 윤리 위배이며, 적발 시 낙제 처리됩니다.
                                            </p>
                                        </div>
                                        <label className="flex items-center gap-4 cursor-pointer select-none bg-slate-50 p-5 rounded-2xl hover:bg-indigo-50 transition-colors border-2 border-transparent hover:border-indigo-100 group mt-4">
                                            <input type="checkbox" id="agree" checked={formData.agree} onChange={handleInputChange} className="w-6 h-6 rounded-lg accent-indigo-600 shrink-0" />
                                            <span className="text-sm font-bold text-slate-700 group-hover:text-indigo-900">본인은 위 방침을 충분히 이해하였으며 정직하게 기록하겠습니다.</span>
                                        </label>
                                    </div>
                                </div>

                                <div className="bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 space-y-6">
                                    <h3 className="text-xl font-bold border-b border-slate-50 pb-4 text-slate-900">기록지 작성</h3>
                                    <div className="grid md:grid-cols-2 gap-6">
                                        <input id="name" value={formData.name} onChange={handleInputChange} className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50" placeholder="이름 (홍길동)" />
                                        <input id="studentId" value={formData.studentId} onChange={handleInputChange} className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50" placeholder="학번 (20240123)" />
                                    </div>
                                    <input id="assignment" value={formData.assignment} onChange={handleInputChange} className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50" placeholder="과제명" />
                                    <div className="grid md:grid-cols-2 gap-6">
                                        <select id="aiUsed" value={formData.aiUsed} onChange={handleInputChange} className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50 font-medium">
                                            <option value="사용안함">사용하지 않았음</option>
                                            <option value="사용함">활용하였음</option>
                                        </select>
                                        <input id="tool" disabled={formData.aiUsed === '사용안함'} value={formData.tool} onChange={handleInputChange} className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50" placeholder="사용한 도구 명칭" />
                                    </div>
                                    <textarea id="purpose" disabled={formData.aiUsed === '사용안함'} value={formData.purpose} onChange={handleInputChange} rows="3" className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50 resize-none" placeholder="사용 목적 및 활용 과정"></textarea>
                                    <textarea id="applied" disabled={formData.aiUsed === '사용안함'} value={formData.applied} onChange={handleInputChange} rows="4" className="w-full px-5 py-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none bg-slate-50/50 resize-none" placeholder="실제 과제 반영 부분"></textarea>
                                    <button onClick={saveLog} className="w-full bg-indigo-600 text-white py-5 rounded-2xl font-extrabold text-lg hover:bg-indigo-700 shadow-xl shadow-indigo-600/20 flex items-center justify-center gap-3 transition-all">
                                        <Icon name="clipboard-check" size={24} /> 기록 제출하기
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Professor Login */}
                        {view === 'professor' && (
                            <div className="max-w-sm mx-auto mt-20 animate-fade-in">
                                <div className="bg-white p-10 rounded-[2.5rem] shadow-2xl border border-slate-100 text-center">
                                    <div className="bg-slate-900 w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6 transform -rotate-12 shadow-xl">
                                        <Icon name="lock" size={36} className="text-white" />
                                    </div>
                                    <h2 className="text-2xl font-bold mb-2">교수용 관리 페이지</h2>
                                    <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleAdminLogin()} className="w-full px-6 py-5 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-slate-800 outline-none mb-4 text-center text-2xl tracking-[0.5em] bg-slate-50" placeholder="••••" />
                                    <button onClick={handleAdminLogin} className="w-full bg-slate-900 text-white py-5 rounded-2xl font-bold hover:bg-black transition-all">로그인</button>
                                    <p className="mt-6 text-xs text-slate-400 font-mono">Password: 1234</p>
                                </div>
                            </div>
                        )}

                        {/* Admin Dashboard */}
                        {view === 'admin' && (
                            <div className="space-y-8 animate-fade-in">
                                <div className="flex justify-between items-end">
                                    <h2 className="text-3xl font-extrabold text-slate-900 tracking-tight">AI 사용 기록 현황 ({logs.length})</h2>
                                    <button onClick={() => setView('home')} className="flex items-center gap-2 bg-white text-rose-600 border border-slate-200 px-5 py-3 rounded-2xl font-bold hover:bg-rose-50 transition-colors shadow-sm">
                                        <Icon name="log-out" size={18} /> 로그아웃
                                    </button>
                                </div>
                                <div className="bg-white rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden">
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left border-collapse">
                                            <thead>
                                                <tr className="bg-slate-50 text-slate-500 text-xs font-bold uppercase tracking-widest border-b border-slate-100">
                                                    <th className="px-8 py-5">이름 / 학번</th>
                                                    <th className="px-8 py-5">과제명</th>
                                                    <th className="px-8 py-5">사용 여부</th>
                                                    <th className="px-8 py-5">도구</th>
                                                    <th className="px-8 py-5 text-right">삭제</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-50">
                                                {logs.length === 0 ? (
                                                    <tr><td colSpan="5" className="px-8 py-20 text-center text-slate-400">제출된 기록이 없습니다.</td></tr>
                                                ) : (
                                                    logs.map((log) => (
                                                        <tr key={log.id} className="hover:bg-slate-50 transition-colors group">
                                                            <td className="px-8 py-6 font-bold">{log.name}<br/><span className="text-xs text-slate-400">{log.studentId}</span></td>
                                                            <td className="px-8 py-6">{log.assignment}</td>
                                                            <td className="px-8 py-6">
                                                                <span className={`px-3 py-1 rounded-full text-[11px] font-bold ${log.aiUsed === '사용함' ? 'bg-amber-100 text-amber-700' : 'bg-indigo-50 text-indigo-600'}`}>{log.aiUsed}</span>
                                                            </td>
                                                            <td className="px-8 py-6 text-sm">{log.tool || '-'}</td>
                                                            <td className="px-8 py-6 text-right"><button onClick={() => deleteLog(log.id)} className="text-slate-300 hover:text-rose-500 p-2">삭제</button></td>
                                                        </tr>
                                                    ))
                                                )}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="mt-20 py-10 text-center text-slate-400 text-sm border-t border-slate-200 max-w-4xl mx-auto px-6">
                        <p className="font-bold text-slate-500 mb-2">AI Ethics & Academic Integrity</p>
                        <p>© 2026 군산대학교 AIX-Boost</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
